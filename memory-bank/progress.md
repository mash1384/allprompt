# 프로젝트 진행 기록

## Phase 0: 준비 및 설계

### 단계 1: 개발 환경 설정
- Python 3.8 이상 설치 확인
- pip 설치 확인
- 프로젝트 디렉토리 생성 
- 가상 환경 생성 준비

### 단계 2: 핵심 의존성 설치 (완료)
- 다음 핵심 의존성을 포함한 requirements.txt 파일 생성:
  - PySide6>=6.5.0: GUI 프레임워크
  - tiktoken>=0.5.1: OpenAI 토큰화 라이브러리
  - pathspec>=0.11.0: .gitignore 패턴 적용
  - pyperclip>=1.8.2: 클립보드 제어
  - requests>=2.31.0: HTTP 요청 처리
  - packaging>=23.0: 버전 문자열 처리
  - appdirs>=1.4.4: 플랫폼별 디렉토리 경로 관리

- 프로젝트 구조 생성:
  - src/: 소스 코드 디렉토리
    - core/: 핵심 로직 모듈 (file_scanner.py, tokenizer.py, filter.py, output_formatter.py)
    - gui/: 사용자 인터페이스 모듈 (main_window.py, settings_dialog.py)
    - utils/: 유틸리티 모듈 (settings_manager.py, clipboard_utils.py)
  - tests/: 테스트 코드 디렉토리
  - venv/: 가상 환경 디렉토리
  
- 핵심 모듈 파일 구현:
  - file_scanner.py: 디렉토리 스캔, 파일 유형 감지, 텍스트 파일 읽기
  - tokenizer.py: 토큰 수 계산 및 모델 관리
  - filter.py: .gitignore 규칙 파싱 및 적용
  - output_formatter.py: 선택된 파일의 내용을 형식화된 출력으로 변환
  - main_window.py: 메인 UI 레이아웃, 트리 뷰, 버튼 구성
  - settings_dialog.py: 사용자 설정 관리 UI
  - settings_manager.py: 설정 저장 및 로드
  - clipboard_utils.py: 클립보드 복사 및 붙여넣기

- 기타 관리 파일 생성:
  - README.md: 프로젝트 소개, 설치 및 사용법 가이드
  - .gitignore: 버전 관리에서 제외될 파일 패턴 정의

### 단계 5: 기본 GUI 창 생성 및 레이아웃 정의 (완료)
- 애플리케이션 진입점인 `src/main.py` 구현
  - QApplication 초기화 및 메인 윈도우 로드
  - 기본 로깅 설정 및 예외 처리
- `src/gui/main_window.py`에 메인 UI 구현
  - QMainWindow를 상속받은 MainWindow 클래스 구현
  - 메인 레이아웃에 QSplitter를 사용하여 좌우 패널 분할
  - 좌측 패널에 파일/폴더 구조를 표시할 QTreeView 구현
  - 우측 패널에 파일 선택 정보 및 기능 버튼 배치:
    - 폴더 열기 버튼과 현재 폴더 경로 표시
    - 선택된 파일 수와 총 토큰 수 표시 영역
    - 클립보드에 복사 버튼
  - 상태 표시줄 구현 (진행 상태 및 메시지 표시)
  - 프로그레스 바 (토큰 계산 진행 표시 용)
  - 메뉴바 구현 (파일 메뉴, 도움말 메뉴)
- 폴더 선택 다이얼로그 및 기본 폴더 로드 기능 구현
- 정보 대화상자 구현
- 윈도우 종료 이벤트 처리

### 단계 6: 파일 시스템 스캔 로직 구현 (완료)
- `src/core/file_scanner.py` 모듈에 파일 시스템 스캔 기능 구현:
  - `scan_directory()` 함수: 지정된 디렉토리 재귀적으로 스캔, 파일/폴더 정보 반환
  - `is_hidden()` 함수: 파일/폴더 숨김 여부 확인 (OS 독립적)
  - `is_binary_file()` 함수: 텍스트/바이너리 파일 구분
  - `read_text_file()` 함수: 텍스트 파일 내용 읽기 (다양한 인코딩 처리)
- 파일 스캔 로직과 메인 윈도우 트리 뷰 연동:
  - "폴더 열기" 버튼 클릭 시 `QFileDialog.getExistingDirectory`로 경로 선택
  - 선택된 경로로 `scan_directory()` 함수 호출하여 파일/폴더 목록 가져옴
  - 스캔 결과로 `QTreeView` 모델 채우기
  - 파일/폴더/심볼릭 링크/바이너리 파일을 아이콘으로 시각적 구분
  - 추가 정보(숨김 여부, 심볼릭 링크, 바이너리 등)를 텍스트와 툴팁으로 표시
- "숨김 파일/폴더 표시" 토글 옵션 구현:
  - 토글 체크박스를 통해 숨김 파일/폴더 포함 여부 제어
  - 토글 상태 변경 시 현재 폴더 다시 로드하여 적용
- 다양한 예외 상황 처리:
  - 파일 접근 권한 부족
  - 심볼릭 링크 대상 확인 오류
  - 스캔 과정의 기타 예외 처리

## Phase 1: 핵심 로직 및 기본 UI 구현

### 단계 7: 텍스트/바이너리 파일 식별 및 UI 표시 로직 추가 (완료)
- `src/core/file_scanner.py`의 `is_binary_file()` 함수 개선:
  - 바이너리 파일 확장자 목록 추가 (실행 파일, 압축 파일, 이미지, 오디오, 비디오 등)
  - 확장자 기반 빠른 식별 로직 구현 (파일 내용 검사 전에 수행)
  - 기존 바이트 검사 로직 유지 (확장자 기반 검사 실패 시)
- `src/gui/main_window.py`의 바이너리 파일 UI 표시 개선:
  - 바이너리 파일용 아이콘 개선 (SP_DriveFDIcon 사용)
  - 바이너리 파일 이름을 회색으로 표시하여 시각적 구분 강화
  - 바이너리 파일에 설명적인 툴팁 추가 ("바이너리 파일 (토큰 계산에서 제외됨)")
  - 바이너리 파일 플래그를 트리 아이템 데이터로 저장 (Qt.UserRole + 1)
  - 오류 파일도 바이너리로 처리하여 토큰 계산에서 제외
- 구현 혜택:
  - 사용자에게 바이너리 파일을 시각적으로 명확하게 표시
  - 확장자 기반 빠른 식별로 성능 향상
  - 바이너리 파일을 토큰 계산에서 자동 제외하기 위한 데이터 플래그 추가

### 단계 8: 파일 내용 읽기 및 인코딩 처리 로직 구현 (완료)
- `src/core/file_scanner.py`의 `read_text_file()` 함수 개선:
  - 더 다양한 인코딩 형식 지원 추가 (UTF-8, UTF-8-sig, UTF-16, Latin-1, EUC-KR, Shift-JIS 등)
  - 오류 발생 시 상세 오류 정보를 담은 딕셔너리 반환 구조로 개선:
    - 파일을 찾을 수 없는 경우: `file_not_found` 오류 타입 및 세부 정보 제공
    - 바이너리 파일인 경우: `binary_file` 오류 타입 및 세부 정보 제공
    - 접근 권한이 없는 경우: `access_denied` 오류 타입 및 세부 정보 제공
    - 인코딩 감지 실패: `encoding_detection_failed` 오류 타입 및 시도된 인코딩 목록 포함
  - 다양한 예외 상황 별 로깅 및 오류 처리 개선
- `src/core/output_formatter.py`의 `generate_file_contents()` 함수 수정:
  - 개선된 `read_text_file()` 함수의 새로운 반환 타입(문자열 또는 딕셔너리) 처리 로직 추가
  - 오류 정보가 담긴 딕셔너리 반환 시 해당 오류를 파일 내용 대신 주석으로 표시
  - 기존 None 반환에 대한 하위 호환성 유지
- 구현 혜택:
  - 더 많은 인코딩 형식을 지원하여 다양한 소스 코드 파일을 정확히 읽을 수 있음
  - 파일 읽기 과정에서 발생하는 오류를 더 명확하게 식별 및 처리 가능
  - 오류가 발생한 파일도 출력 포맷에 포함시켜 사용자에게 오류 원인을 명확히 제공
  - 개선된 오류 처리 및 로깅으로 디버깅 및 문제 해결이 용이해짐

### 단계 9: 기본 토큰화 로직 구현 (완료)
- `src/core/tokenizer.py` 모듈 구현:
  - `tiktoken` 라이브러리를 활용한 OpenAI 모델 기반 토큰화 기능 구현
  - `Tokenizer` 클래스 구현:
    - 다양한 OpenAI 모델 지원 (gpt-3.5-turbo, gpt-4 등)
    - 모델별 인코딩 및 최대 토큰 수 정보 관리
    - 텍스트 입력에 대한 토큰 수 계산 함수 제공
    - 예외 상황 및 경계 조건 처리 (None, 빈 문자열 등)
  - 사용 가능한 모델 목록 및 최대 토큰 수 조회 기능 추가
  - 기본 모델로 "gpt-3.5-turbo" 설정
- 메인 윈도우 UI와 토큰화 모듈 연동:
  - `src/gui/main_window.py`에 토큰화 모듈 통합
  - 파일 체크박스 선택 상태 변경 시 토큰 계산 로직 구현
  - 실시간 총 토큰 수 업데이트 및 표시
  - 바이너리 파일, 오류 파일 등 토큰 계산 예외 처리
  - 파일 경로별 토큰 수 캐싱 기능 구현으로 성능 최적화
  - 선택된 파일 수 및 총 토큰 수 정보 표시 UI 완성
- 구현 혜택:
  - 사용자가 선택한 파일들의 총 토큰 수를 실시간으로 확인 가능
  - 토큰 계산의 일관성 및 정확성 보장
  - 바이너리 파일, 접근 불가 파일 등을 자동으로 토큰 계산에서 제외
  - 토큰 계산 결과 캐싱으로 반복 계산 최소화 및 UI 응답성 향상

### 단계 10: 파일 트리 뷰 UI 구현 (아이콘, 툴팁 포함) (완료)
- `src/gui/main_window.py`의 트리 뷰 기능 개선:
  - 다양한 파일 유형별 전문화된 아이콘 추가:
    - 폴더, 일반 파일, 심볼릭 링크, 바이너리 파일, 오류 파일용 기본 아이콘
    - 파일 확장자별 추가 아이콘 (코드 파일, 문서 파일, 이미지 파일 등)
    - 파일 확장자-아이콘 매핑 테이블 구현 (50개 이상 확장자 지원)
  - 파일 유형별 시각적 표시 개선:
    - 바이너리 파일, 숨김 파일/폴더, 오류 파일을 회색/빨간색으로 구분
    - 파일 확장자와 언어 매핑 테이블 구현 (70개 이상 확장자 지원)
  - 상세 툴팁 정보 제공:
    - 파일 경로, 크기, 언어 유형 등 기본 정보 표시
    - 심볼릭 링크의 대상 경로 표시
    - 오류 유형별 상세 설명 추가 (접근 권한 오류, 파일 없음 등)
    - 폴더의 경우 항목 수 표시
  - 트리 뷰 성능 최적화:
    - 행 높이 균일화로 렌더링 성능 개선
    - 열 너비 자동 조정으로 가독성 향상
    - 교차 행 색상으로 시각적 구분 제공
  - 오류 처리 및 상태 표시 개선:
    - 파일 처리 오류를 명확히 표시하고 토큰 계산에서 제외
    - 아이템 경로 조회 및 상태 관리 개선
    - 제외된 파일 수를 상태 표시줄에 표시
- 구현 혜택:
  - 직관적이고 시각적으로 명확한 파일 트리 표시
  - 파일 유형별 쉬운 구분으로 사용자 경험 향상
  - 상세 파일 정보 제공으로 작업 효율성 증가
  - 언어별 아이콘 및 정보 제공으로 코드 파일 식별 용이

### 단계 11: 스캔 로직과 트리 뷰 연동 (숨김 파일 토글 옵션 준비) (완료)
- `src/gui/main_window.py`에 스캔 로직과 트리 뷰 연동 구현:
  - "폴더 열기" 버튼 클릭 시 `QFileDialog.getExistingDirectory`로 폴더 경로 선택
  - 선택된 경로로 `scan_directory()` 함수 호출하여 파일/폴더 정보 목록 가져옴
  - 스캔 결과로 `QTreeView` 모델 생성 및 채우기
  - 파일 항목에 체크박스 추가 (디렉토리는 체크박스 없음)
  - 파일/폴더/심볼릭 링크/바이너리 파일에 적절한 아이콘 시각적 구분 구현
- "숨김 파일/폴더 표시" 토글 옵션 구현:
  - 메인 윈도우에 숨김 파일/폴더 표시 체크박스 추가
  - 체크박스 토글 시 `_toggle_hidden_files()` 함수로 현재 폴더 다시 로드
  - 스캔 시 `include_hidden` 옵션을 체크박스 상태에 따라 설정
- 체크박스 상태 관리 및 이벤트 처리 구현:
  - 트리 모델의 `itemChanged` 시그널을 `_on_item_changed` 슬롯에 연결
  - 체크박스 상태 변경 시 선택된 파일 목록 및 토큰 계산 실시간 업데이트
  - 선택된 파일 수 표시 및 복사 버튼 활성화 상태 관리
- 폴더 로드 시 상태 초기화 로직 개선:
  - 새 폴더 로드 시 기존 선택 목록, 토큰 캐시, 총 토큰 수 초기화
  - 상태 표시줄 메시지 및 UI 레이블 업데이트
- 구현 혜택:
  - 직관적인 UI를 통해 사용자가 폴더 구조를 탐색하고 파일 선택 가능
  - 파일/폴더 유형을 아이콘과 색상으로 명확히 구분
  - 숨김 파일 토글로 필요한 파일만 표시하여 복잡한 폴더 탐색 용이
  - 체크박스 기반의 선택 메커니즘으로 확장성 있는 파일 선택 기능 제공

## Phase 2: 핵심 기능 통합 및 필터링

### 단계 12: 트리 뷰에 체크박스 추가 및 기본 상태 관리 (완료)
- `src/gui/main_window.py`의 트리 뷰 체크박스 기능 개선:
  - 모든 파일 및 디렉토리 아이템에 체크박스 추가 (`setCheckable(True)` 적용)
  - 루트 디렉토리 아이템도 체크 가능하도록 수정
  - 체크된 아이템 상태 추적을 위한 자료구조 개선:
    - `checked_items` 집합을 통해 체크된 경로 추적
    - `checked_files` 변수로 체크된 파일 수 추적
    - `checked_dirs` 변수로 체크된 디렉토리 수 추적
  - 아이템 체크 상태 변경 이벤트 처리 개선:
    - `_on_item_changed` 메서드에서 파일/디렉토리 구분하여 처리
    - 체크 시 해당 카운터(checked_files/checked_dirs) 증가
    - 체크 해제 시 해당 카운터 감소
  - 전체 아이템 경로-UI 아이템 매핑 구현:
    - 경로를 키로 사용하는 아이템 사전 관리
    - 빠른 조회를 통한 UI 성능 최적화
  - 디렉토리 체크 상태 기본 관리 로직 추가:
    - 디렉토리 체크 상태 변경 감지 및 로깅
    - 디렉토리 체크 상태 추적을 위한 기반 구조 마련
- 토큰 계산 및 UI 업데이트 로직 개선:
  - 체크된 파일 수 변수(`checked_files`)를 활용한 UI 업데이트
  - 복사 버튼 활성화 상태 제어 개선
- 구현 혜택:
  - 파일뿐만 아니라 디렉토리도 선택 가능하여 사용자 편의성 향상
  - 디렉토리 선택 기능을 통해 다음 단계인 '체크박스 부모/자식 자동 선택/해제' 구현 위한 기반 마련
  - 체크 상태 관리 구조화로 코드 가독성 및 유지보수성 향상
  - 선택된 파일/폴더 수에 대한 명확한 추적 기능 추가

### 단계 13: 체크박스 부모/자식 자동 선택/해제 로직 구현 (완료)
- `src/gui/main_window.py`의 체크박스 로직 개선:
  - 체크박스 상태 변경 이벤트 처리를 위한 시그널 관리 개선:
    - 이벤트 캐치 중복 방지를 위한 시그널 연결/해제 로직 추가
    - 무한 재귀 현상 방지 메커니즘 구현
  - 부모 폴더 체크 시 하위 모든 항목 자동 체크 기능 구현:
    - `_set_item_checked_state` 함수로 하위 항목 재귀적 처리
    - 체크된 아이템 상태를 `checked_items` 집합에 자동 추가/제거
    - 파일/폴더 구분에 따라 `checked_files`/`checked_dirs` 카운터 업데이트
  - 모든 하위 항목 체크 상태에 따른 부모 폴더 자동 체크 기능 구현:
    - `_update_parent_checked_state` 함수로 부모 체크 상태 자동 업데이트
    - 모든 자식이 체크되면 부모도 체크, 하나라도 체크 해제되면 부모도 체크 해제
    - 재귀적으로 상위 부모까지 체크 상태 전파
- 구현 혜택:
  - 사용자 경험 향상: 한 번의 클릭으로 폴더와 그 내용 모두 선택/해제 가능
  - 일관된 체크 상태 관리로 선택 과정에서의 혼란 방지
  - 복잡한 파일 구조에서도 직관적인 파일 선택 메커니즘 제공
  - 모든 체크 상태 변경은 실시간으로 토큰 계산에 반영되어 정확한 정보 제공

### 단계 14: `.gitignore` 파싱 로직 구현 (완료)
- `src/core/filter.py`의 `.gitignore` 파싱 기능:
  - `GitignoreFilter` 클래스 구현:
    - `.gitignore` 파일 찾기 및 파싱 기능
    - `pathspec` 라이브러리를 활용한 효율적인 파일 경로 매칭
    - 경로가 `.gitignore` 규칙에 따라 무시되어야 하는지 확인하는 메서드 제공
  - 유연한 경로 처리:
    - 절대 경로와 상대 경로 모두 지원
    - OS별 경로 구분자 차이 자동 처리
  - 오류 처리 및 로깅:
    - `.gitignore` 파일이 없거나 읽기 실패 시 적절한 처리
    - 필터링 과정의 오류 상황에 대한 로깅 및 예외 처리
  - 효율적인 경로 목록 필터링:
    - 경로 목록을 한 번에 필터링하는 `filter_paths` 메서드 제공
- 구현 혜택:
  - 버전 관리 시스템과 일관된 파일 필터링 제공
  - 개발자가 이미 익숙한 `.gitignore` 문법을 활용하여 직관적인 필터링
  - 복잡한 패턴 매칭도 효율적으로 처리할 수 있는 구조

### 단계 15: 스캔/표시 시 `.gitignore` 필터링 적용 (완료)
- `src/gui/main_window.py`의 `.gitignore` 필터링 통합:
  - `.gitignore` 필터 활성화/비활성화 UI 요소 추가:
    - `.gitignore 규칙 적용` 체크박스 구현
    - 체크박스 토글 시 폴더 리로드 및 필터 재적용
  - `.gitignore` 필터링 적용 로직 구현:
    - 폴더 로드 시 `.gitignore` 파일 자동 감지 및 로드
    - 스캔된 파일/폴더 목록에 `.gitignore` 규칙 적용
    - 무시된 항목 수를 상태 표시줄에 표시하여 사용자에게 피드백 제공
  - 시각적 표현 개선:
    - `.gitignore`에 의해 무시되는 항목 회색으로 표시
    - 무시된 항목 체크박스 비활성화로 선택 방지
    - 무시된 항목에 대한 설명 툴팁 추가
  - 트리 뷰 구성 로직 개선:
    - 필터링으로 인해 중간 경로가 없는 경우 자동 생성
    - 필터링 상태 변경 시 트리 뷰 완전 재구성
- 구현 혜택:
  - 버전 관리 시스템과 일관된 파일 필터링으로 중요 파일에 집중 가능
  - 사용자가 필터링 활성화/비활성화를 통해 필요에 따라 유연하게 사용
  - 시각적 피드백으로 무시된 항목을 명확히 구분
  - 복잡한 프로젝트에서도 효율적인 파일 구조 탐색 및 선택 가능

### 단계 16: 백그라운드 토큰 계산 로직 및 진행 상태 표시 구현 (완료)
- `src/gui/main_window.py`에 백그라운드 토큰 계산 기능 추가:
  - `TokenizerThread` 클래스 구현:
    - `QThread`를 상속받은 전용 스레드 클래스 설계
    - 백그라운드에서 파일 내용 읽기 및 토큰 계산 수행
    - 시그널 기반 진행 상황 및 결과 통신 시스템:
      - `progress_updated`: 현재 진행 상태 및 총 파일 수 보고
      - `token_calculated`: 파일별 계산된 토큰 수 보고 
      - `calculation_finished`: 계산 완료 알림
      - `calculation_error`: 오류 발생 시 메시지 전달
    - 스레드 안전한 중지 메커니즘 구현
  - 폴더 로드 시 백그라운드 토큰 계산 자동 시작:
    - `_load_folder` 메서드 개선하여 폴더 로드 완료 후 텍스트 파일 목록 수집
    - `_start_token_calculation` 메서드로 백그라운드 스레드 시작
    - 기존 스레드가 실행 중인 경우 안전하게 중지 후 새 스레드 시작
  - 진행 상태 표시 UI 연동:
    - 프로그레스 바를 사용한 시각적 진행 상황 표시
    - 상태 표시줄에 "토큰 계산 중... (X/Y 파일)" 형식의 진행 메시지 표시
  - 결과 처리 및 시그널 핸들러 구현:
    - `_on_token_progress`: 진행 상황 UI 업데이트
    - `_on_token_calculated`: 계산된 토큰 결과 캐시 저장 및 선택된 파일인 경우 총 토큰 수 업데이트
    - `_on_token_calculation_finished`: 계산 완료 시 UI 정리 및 최종 업데이트
    - `_on_token_calculation_error`: 오류 발생 시 사용자 알림
  - 안전한 종료 처리:
    - 프로그램 종료 시 실행 중인 스레드 안전하게 중지
    - `closeEvent` 메서드에 스레드 정리 로직 추가
- 구현 혜택:
  - 대용량 폴더도 UI 응답성 유지하며 토큰 계산 가능
  - 사용자에게 실시간 진행 상황 피드백 제공으로 UX 향상
  - 백그라운드 작업 모델로 UI 스레드 블로킹 방지
  - 스레드 간 안전한 통신 및 리소스 관리

### 단계 17: 실시간 총 토큰 수 계산 및 표시 (필터링, 오류 파일 제외) (완료)
- `src/gui/main_window.py`의 토큰 계산 및 표시 로직 개선:
  - 토큰 계산 시스템 최적화:
    - 파일 경로별 토큰 수를 저장하는 `token_cache` 딕셔너리 활용
    - 백그라운드 계산 스레드와 UI 업데이트 동기화 처리
    - 선택 상태 변경 시 캐시된 토큰 정보 활용으로 즉시 반응
  - `_update_token_count` 메서드 개선:
    - 백그라운드 계산 진행 중 중복 계산 방지 로직 추가
    - 체크된 파일 항목만 대상으로 정확한 토큰 수 계산 
    - 다양한 상황 정확히 처리:
      - 바이너리 파일 자동 제외
      - 오류 파일(읽기 실패, 인코딩 오류 등) 자동 제외
      - 디렉토리 항목은 토큰 계산에서 제외
      - 필터링된 항목(비활성화된 체크박스) 토큰 계산에서 제외
    - 계산 결과 실시간 UI 반영:
      - 총 토큰 수 레이블 업데이트
      - 선택된 파일 수 표시 업데이트
      - 복사 버튼 활성화 상태 관리
  - 제외된 파일 정보 제공:
    - 바이너리 파일이나 오류 파일이 제외된 경우 상태 표시줄에 정보 표시
    - 제외된 항목 수 카운트 및 표시
  - 파일/디렉토리 체크박스 상태 변경 시 토큰 수 자동 업데이트:
    - `_on_item_changed` 메서드에서 체크 상태 변경 시 토큰 수 즉시 재계산
    - 디렉토리 체크/해제 시 포함된 모든 파일 토큰 수 반영
    - 부모 디렉토리 자동 체크/해제 시 연쇄적으로 토큰 수 업데이트
  - 안정적인 캐싱 시스템:
    - 폴더 전환 시 캐시 초기화
    - 모든 파일 경로를 키로 사용하여 오류 방지
    - 캐시 데이터 일관성 유지 메커니즘
- 구현 혜택:
  - 사용자에게 실시간 토큰 수 정보 제공으로 결정 지원
  - 폴더나 파일 선택/해제 즉시 토큰 수 업데이트로 직관적 UX
  - 토큰 계산의 정확성 보장 (필터링 및 오류 처리)
  - 캐싱 시스템으로 반복 계산 방지 및 성능 최적화

### 단계 18: `<file_map>` 생성 로직 구현 (정의된 형식 적용) (완료)
- `src/core/output_formatter.py` 모듈에 `generate_file_map()` 함수 구현:
  - 선택된 파일 및 폴더 정보 목록과 루트 디렉토리 경로를 입력받아 `<file_map>` 형식의 문자열 생성
  - 경로 정렬 및 트리 구조 생성으로 체계적인 파일 구조 표현
  - 정의된 형식(들여쓰기, 디렉토리/파일 표시)을 정확히 따르는 출력 생성
  - 상대 경로 기준 파일 구조 표현으로 이식성 향상
  - 복잡한 중첩 구조도 효율적으로 처리하는 재귀 알고리즘 적용
- 구현 혜택:
  - LLM 프롬프트에 체계적인 파일 구조 정보 제공
  - 직관적인 들여쓰기와 포맷으로 가독성 향상
  - 다양한 프로젝트 구조 및 선택 패턴 지원
  - 명확한 시각적 구별로 디렉토리와 파일을 쉽게 식별 가능

### 단계 19: `<file_contents>` 생성 로직 구현 (언어 식별자 매핑 포함) (완료)
- `src/core/output_formatter.py` 모듈에 `generate_file_contents()` 함수 구현:
  - 선택된 파일 정보 목록과 루트 디렉토리 경로를 입력받아 `<file_contents>` 형식의 문자열 생성
  - 파일 확장자-언어 식별자 매핑 테이블 구현 (70개 이상 확장자 지원)
  - 각 파일 내용을 지정된 포맷으로 형식화:
    - `File: [상대 경로]`
    - 코드 블록 형식 (```[언어 식별자])으로 내용 감싸기
    - 파일 간 구분을 위한 줄바꿈 추가
  - 파일 읽기 오류 처리 및 명확한 오류 메시지 포함
- `generate_full_output()` 함수 구현:
  - `<file_map>`과 `<file_contents>`를 결합한 최종 출력 생성
  - 두 섹션 사이에 빈 줄을 추가하여 구분
- 구현 혜택:
  - 파일 내용을 언어별 코드 블록으로 명확히 표시
  - 올바른 언어 식별자를 통한 LLM의 코드 이해 개선
  - 파일 읽기 실패 시에도 오류 정보 제공으로 작업 지속성 보장
  - 일관된 포맷으로 LLM이 파일 내용과 구조를 쉽게 파악 가능

### 단계 20: "복사" 버튼 기능 구현 및 피드백 (완료)
- `src/gui/main_window.py`의 복사 버튼 기능 구현:
  - 복사 버튼 클릭 시 `_copy_to_clipboard()` 메서드 호출
  - 선택된 파일 및 폴더 정보 수집:
    - 체크된 항목 중 유효한 항목만 대상으로 처리
    - 바이너리 파일 자동 제외
    - 상대 경로와 절대 경로 정보 유지
  - `generate_full_output()` 함수 호출하여 `<file_map>`과 `<file_contents>` 생성
  - `copy_to_clipboard()` 함수로 클립보드에 복사
  - 상태 표시줄에 "N개 파일 (M 토큰) 클립보드에 복사됨" 메시지 표시
  - 오류 처리 및 사용자 피드백 개선:
    - 선택된 파일이 없을 경우 안내 메시지 제공
    - 복사 실패 시 오류 메시지 표시
    - 예외 발생 시 상세 오류 정보를 로그와 메시지 박스로 제공
- 구현 혜택:
  - 사용자가 선택한 파일/폴더 구조와 내용을 원클릭으로 LLM 프롬프트에 사용 가능
  - 명확한 피드백으로 복사 성공/실패 여부 인지
  - 다양한 오류 상황에 대한 친절한 안내로 사용자 경험 향상
  - 총 토큰 수 표시로 LLM 모델 컨텍스트 한계 관리 용이

## Phase 3: UI/UX 개선

### 단계 1: 디자인 컨셉 및 스타일 가이드 정의 (완료)
- 주요 디자인 원칙 수립 및 문서화:
  - 미니멀리즘 - 불필요한 요소를 제거하고 핵심 기능에 집중
  - 명확성 - 사용자가 직관적으로 이해할 수 있는 구조와 상태 표시
  - 일관성 - 전체 애플리케이션에 걸쳐 동일한 디자인 언어 사용
  - 전문성 - 개발자를 위한 전문 도구로서의 신뢰감 있는 디자인
- 색상 팔레트 정의 및 적용 (다크 모드 기반):
  - 배경색 (Dark Base): #20232A, #282C34
  - 패널/영역 구분 배경색 (Dark Panels): #1A1D23, #32363F
  - 텍스트 색상 (Text): #ABB2BF, #DCE0E8
  - 강조/선택 색상 (Accent): #528BFF, #61AFEF
  - 경고/오류 색상 (Warning): #E5C07B (노란색 계열), #E06C75 (붉은색 계열)
  - 비활성 색상 (Disabled): #5A6374
  - 구분선 색상 (Divider): #32363F
- 폰트 설정 정의 및 적용:
  - 기본 폰트: 시스템 산세리프 폰트 (-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto)
  - 기본 텍스트 크기: 14px
  - 헤더/제목: 15-16px, 볼드
  - 작은 텍스트: 12-13px
  - 강조 텍스트: 볼드 또는 색상 변경
- 기본 간격 및 레이아웃 규칙 정의:
  - 기본 여백: 8px
  - 내부 패딩 (작은 요소): 6-8px
  - 내부 패딩 (큰 요소): 10-12px
  - 섹션 간격: 16-20px
  - 아이템 높이: 26-30px
- 스타일시트 구현:
  - QSS 파일에 모든 스타일 정의 통합 (src/gui/resources/styles/style.qss)
  - 전체 애플리케이션에 걸쳐 일관된 스타일 적용
  - 다양한 UI 요소별 상태에 따른 스타일 정의 (버튼, 체크박스, 트리뷰 등)
- 매끄러운 사용자 경험을 위한 UI 개선:
  - 패널 헤더와 컨텐츠 영역 명확히 구분
  - 정보 그룹화와 시각적 계층 구조 개선
  - 주요 컨트롤과 정보 표시 영역의 명확한 레이아웃 배치

### 단계 2: 메인 레이아웃 및 패널 재구성 (완료)
- 애플리케이션 창의 2단 레이아웃 구성:
  - 왼쪽 패널: 파일 트리 뷰 및 필터 옵션
  - 오른쪽 패널: 정보 요약 및 주요 액션
  - QSplitter를 통한 사용자 패널 크기 조절 기능
- 왼쪽 파일 트리 패널 개선:
  - "파일/폴더" 헤더 추가 및 스타일 적용
  - 트리 뷰 영역 최적화 및 스타일 적용
  - 필터 옵션 (숨김 파일/폴더 표시, .gitignore 규칙 적용) 배치 최적화
- 오른쪽 정보/액션 패널 개선:
  - 영역별 명확한 헤더 추가 ("폴더 선택", "선택 정보", "작업")
  - 정보 표시 방식 개선 (레이블-값 쌍으로 구성)
  - 폴더 경로 표시 영역 시각적 개선
  - 선택된 파일 수와 토큰 수 정보 영역 재구성 
  - 주요 액션 버튼 ("클립보드에 복사") 크기 및 가시성 개선
- UI 컴포넌트 정렬 및 간격 최적화:
  - 패널 내부 여백 및 컴포넌트 간 간격 일관성 확보
  - 수직/수평 정렬 개선으로 시각적 균형 확보
  - 섹션 간 논리적 그룹화와 시각적 구분 강화
